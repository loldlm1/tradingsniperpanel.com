<% content_for :title, "#{t('dashboard.nav.billing', default: 'Billing')} | #{t('app.short_name')}" %>

<div class="mb-8">
  <h1 class="text-2xl md:text-3xl text-gray-800 dark:text-gray-100 font-bold"><%= t("dashboard.nav.billing", default: "Billing") %></h1>
  <p class="text-gray-600 dark:text-gray-300"><%= t("dashboard.billing_overview", default: "Manage subscription and invoices (placeholder until Stripe wiring is complete).") %></p>
</div>

<div class="grid gap-6 lg:grid-cols-3">
  <div class="bg-white dark:bg-gray-800 shadow-sm rounded-xl border border-gray-200 dark:border-gray-700 p-5 lg:col-span-2">
    <div class="flex items-center justify-between mb-4">
      <div>
        <div class="text-sm font-semibold text-gray-800 dark:text-gray-100"><%= t("dashboard.plan_card.title") %></div>
        <p class="text-sm text-gray-500 dark:text-gray-400"><%= t("pricing.subtitle") %></p>
      </div>
    </div>
    <div class="grid gap-4 md:grid-cols-2">
      <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900">
        <div class="text-sm text-gray-500 dark:text-gray-400 uppercase font-semibold mb-2"><%= t("dashboard.plan_card.manage") %></div>
        <p class="text-sm text-gray-600 dark:text-gray-300 mb-3"><%= t("dashboard.billing_manage_copy", default: "Update payment method, view invoices, or cancel your plan.") %></p>
        <%= button_to t("dashboard.plan_card.manage"), dashboard_billing_portal_path, method: :post, class: "btn-sm bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white w-full text-center", data: { turbo: false } %>
      </div>
      <div class="p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900">
        <div class="text-sm text-gray-500 dark:text-gray-400 uppercase font-semibold mb-2"><%= t("dashboard.plan_card.subscribe") %></div>
        <p class="text-sm text-gray-600 dark:text-gray-300 mb-3"><%= t("dashboard.billing_subscribe_copy", default: "Upgrade or restart your subscription with the checkout flow.") %></p>
        <%= link_to t("dashboard.plan_card.subscribe"), dashboard_pricing_path, class: "btn-sm bg-violet-600 hover:bg-violet-700 text-white w-full text-center" %>
      </div>
    </div>

    <% if @subscription.present? %>
      <div class="mt-6">
        <div class="text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2"><%= t("dashboard.plan_card.status_active") %></div>
        <div class="text-sm text-gray-600 dark:text-gray-300 mb-1">Plan: <%= @subscription.name %></div>
        <div class="text-xs text-gray-500 dark:text-gray-400">Processor plan: <%= @subscription.processor_plan %></div>
      </div>
    <% end %>
  </div>

  <div class="bg-white dark:bg-gray-800 shadow-sm rounded-xl border border-gray-200 dark:border-gray-700 p-5">
    <div class="text-sm font-semibold text-gray-800 dark:text-gray-100 mb-3"><%= t("dashboard.nav.support", default: "Support") %></div>
    <p class="text-sm text-gray-600 dark:text-gray-300 mb-4"><%= t("dashboard.billing_support_copy", default: "Need help with billing? Reach out and weâ€™ll follow up.") %></p>
    <%= link_to t("dashboard.contact_support", default: "Contact support"), dashboard_support_path, class: "btn-sm bg-white border border-gray-200 hover:border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:hover:border-gray-600 text-gray-700 dark:text-gray-200 w-full text-center" %>
  </div>
</div>
